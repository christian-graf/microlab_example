import{k as f,f as d,a as y,u as g,w,F as h,o as r,Z as M,b as e,e as U,i,l as u,m as q,p as D,d as _,t as a,g as k}from"./app-AV-zgmaC.js";import{_ as N}from"./AuthenticatedLayout-sTjUr4Wg.js";import"./ApplicationLogo-DRyeXrZ8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"py-12"},W={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},B={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},E={class:"p-6 text-gray-900"},A={class:"w-full"},F={class:"table-auto w-full border-collapse border border-slate-500 text-left"},T={class:"p-1 w-[10%]"},I={class:"p-1 w-[10%]"},L={class:"p-1 w-[60%]"},O={class:"p-1 w-[20%]"},Z=["value"],j={colspan:"3"},z={key:0,class:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},G={key:0,class:"w-full"},H={class:"table-auto w-full text-left"},J=["onClick"],K=["onClick"],ee={__name:"Calendar",props:{reminders:{type:Array,default(){return[]}}},setup(m){const c=m,s=f({id:null,day:null,month:null,description:null,interval:null}),b=f([{text:"1 Day",value:"1D"},{text:"2 Days",value:"2D"},{text:"4 Days",value:"4D"},{text:"1 Week",value:"1W"},{text:"2 Weeks",value:"2W"}]);let o=f(null);function R(){for(;c.reminders.length>0;)c.reminders.pop()}function p(l){R();for(const t of l)c.reminders.push(t)}function C(l){s.value={id:l.id??null,day:l.day??null,month:l.month??null,description:l.description??null,interval:l.interval??null}}function V(){o.value=null,s.value.id===null?window.axios.post(route("calendar.reminder.add"),s.value).then(l=>{p(l.data)}).catch(l=>{console.error(l),o.value=`[${l.code}] ${l.message}`}):window.axios.patch(route("calendar.reminder.update",[s.value.id]),s.value).then(l=>{p(l.data)}).catch(l=>{console.error(l),o.value=`[${l.code}] ${l.message}`}),s.value={id:null,day:null,month:null,description:null,interval:null}}function $(l){o.value=null,window.axios.delete(route("calendar.reminder.delete",[l])).then(t=>{p(t.data)}).catch(t=>{console.error(t),o.value=`[${t.code}] ${t.message}`})}return(l,t)=>(r(),d(h,null,[y(g(M),{title:"Calendar"}),y(N,null,{header:w(()=>t[5]||(t[5]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Calendar ",-1)])),default:w(()=>[e("div",S,[e("div",W,[e("div",B,[e("div",E,[e("div",A,[e("form",{onSubmit:U(V,["prevent"])},[i(e("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=n=>s.value.id=n)},null,512),[[u,s.value.id,void 0,{number:!0}]]),e("table",F,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{colspan:"2",class:"p-1"},"Date (DD/MM)"),e("th",{class:"p-1"},"Description"),e("th",{class:"p-1"},"Reminder interval")])],-1)),e("tbody",null,[e("tr",null,[e("td",T,[i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>s.value.day=n),type:"number",min:"1",max:"31",required:"",class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 mt-1 w-full"},null,512),[[u,s.value.day,void 0,{number:!0}]])]),e("td",I,[i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s.value.month=n),type:"number",min:"1",max:"12",required:"",class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 mt-1 w-full"},null,512),[[u,s.value.month,void 0,{number:!0}]])]),e("td",L,[i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>s.value.description=n),type:"text",required:"",class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 mt-1 w-full"},null,512),[[u,s.value.description]])]),e("td",O,[i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.value.interval=n),required:"",class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 mt-1"},[(r(!0),d(h,null,D(b.value,n=>(r(),d("option",{value:n.value},a(n.text),9,Z))),256))],512),[[q,s.value.interval]])])])]),e("tfoot",null,[e("tr",null,[e("td",j,[g(o)?(r(),d("div",z,[t[6]||(t[6]=e("span",{class:"font-medium"},"ERROR!",-1)),_(" "+a(g(o)),1)])):k("",!0)]),t[7]||(t[7]=e("td",{class:"w-full text-right p-4"},[e("button",{type:"submit",class:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-gray-700 focus:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 active:bg-gray-900"},"Save")],-1))])])])],32)]),t[11]||(t[11]=e("br",null,null,-1)),m.reminders.length>=1?(r(),d("div",G,[e("table",H,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",{colspan:"2"},"Date (DD/MM)"),e("th",null,"Description"),e("th",null,"Reminder interval"),e("th",null,"Action")])],-1)),e("tbody",null,[(r(!0),d(h,null,D(m.reminders,n=>{var x;return r(),d("tr",null,[e("td",null,a(n.day),1),e("td",null,a(n.month),1),e("td",null,a(n.description),1),e("td",null,a(((x=b.value.find(v=>v.value===n.interval))==null?void 0:x.text)??"undefined"),1),e("td",null,[e("a",{href:"#",onClick:v=>C(n)},"Edit",8,J),t[9]||(t[9]=_(" | ")),e("a",{href:"#",onClick:v=>$(n.id)},"Delete",8,K)])])}),256))])])])):k("",!0)])])])])]),_:1})],64))}};export{ee as default};
